<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ–°å¢æ´»å‹• | å…§æ¹–é«˜ä¸­è»æ­¦ç¤¾</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-firestore.js"></script>
</head>
<body class="bg-gray-100 text-gray-800 font-sans">

  <!-- ğŸ”° å°è¦½åˆ— -->
  <nav class="bg-gray-900 text-white px-6 py-4 flex justify-between items-center">
    <h1 class="text-xl font-bold">æ–°å¢æ´»å‹•</h1>
    <div>
      <a href="https://pyps0990-alt.github.io/nhmc.github.io/index.html" class="hover:underline">å›é¦–é </a>
    </div>
  </nav>

  <!-- ğŸ“ æ´»å‹•è¡¨å–® -->
  <section class="max-w-xl mx-auto mt-10 p-6 bg-white rounded shadow">
    <h2 class="text-2xl font-semibold mb-4">ğŸ“Œ å¹¹éƒ¨æ–°å¢æ´»å‹•</h2>
    <form id="eventForm" class="space-y-4">
      <input type="text" id="title" placeholder="æ´»å‹•åç¨±" required class="w-full px-3 py-2 border rounded" />
      <input type="datetime-local" id="start" required class="w-full px-3 py-2 border rounded" />
      <input type="datetime-local" id="end" required class="w-full px-3 py-2 border rounded" />
      <input type="text" id="location" placeholder="åœ°é»" class="w-full px-3 py-2 border rounded" />
      <textarea id="description" placeholder="å‚™è¨»" class="w-full px-3 py-2 border rounded"></textarea>
      <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700">æ–°å¢æ´»å‹•</button>
    </form>
    <p id="status" class="text-green-600 mt-4 hidden">âœ… æ´»å‹•å·²æˆåŠŸæ–°å¢ï¼</p>
  </section>

  <!-- ğŸ”§ Firebase åˆå§‹åŒ–èˆ‡é©—è­‰ -->
  <script>
    const firebaseConfig = {
      apiKey: "ä½ çš„APIé‡‘é‘°",
      authDomain: "ä½ çš„å°ˆæ¡ˆ.firebaseapp.com",
      projectId: "ä½ çš„å°ˆæ¡ˆID",
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // ç™»å…¥é©—è­‰ï¼šæœªç™»å…¥è€…å°å›é¦–é 
    firebase.auth().onAuthStateChanged((user) => {
      if (!user) {
        alert("è«‹å…ˆç™»å…¥æ‰èƒ½æ–°å¢æ´»å‹•");
        window.location.href = "https://pyps0990-alt.github.io/nhmc.github.io/index.html";
      }
    });

    // è¡¨å–®æäº¤ â†’ å¯«å…¥ Firestore
    document.getElementById("eventForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const title = document.getElementById("title").value;
      const start = document.getElementById("start").value;
      const end = document.getElementById("end").value;
      const location = document.getElementById("location").value;
      const description = document.getElementById("description").value;
      const user = firebase.auth().currentUser;

      try {
        await db.collection("events").add({
          title,
          start,
          end,
          location,
          description,
          createdBy: user.email,
          createdAt: firebase.firestore.FieldValue.serverTimestamp(),
        });
        document.getElementById("status").classList.remove("hidden");
        document.getElementById("eventForm").reset();
      } catch (error) {
        alert("æ–°å¢å¤±æ•—ï¼š" + error.message);
      }
    });
  </script>

  <!-- ğŸ“Œ é å°¾ -->
  <footer class="text-center text-sm text-gray-500 mt-10 mb-4">
    Â© 2025 å…§æ¹–é«˜ä¸­è»æ­¦ç¤¾ | è¨­è¨ˆèˆ‡ç¶­è­·ï¼šè»æ­¦ç¤¾å‰ç«¯å°çµ„
  </footer>
</body>
</html>
