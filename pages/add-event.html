<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>新增活動 | 內湖高中軍武社</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800 font-sans">

  <!-- 🔰 導覽列 -->
  <nav class="bg-gray-900 text-white px-6 py-4 flex justify-between items-center">
    <h1 class="text-xl font-bold">新增活動</h1>
    <div>
      <a href="https://pyps0990-alt.github.io/nhmc.github.io/" class="hover:underline">回首頁</a>
    </div>
  </nav>

  <!-- 👤 幹部驗證表單 -->
  <section class="max-w-xl mx-auto mt-10 p-6 bg-white rounded shadow">
    <h2 class="text-xl font-semibold mb-4">👤 幹部身份驗證</h2>
    <form id="verifyForm" class="space-y-4">
      <input type="text" id="class" placeholder="班級（例如305）" required class="w-full px-3 py-2 border rounded" />
      <input type="text" id="number" placeholder="座號（例如12）" required class="w-full px-3 py-2 border rounded" />
      <input type="text" id="name" placeholder="姓名" required class="w-full px-3 py-2 border rounded" />
      <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700">驗證身份</button>
    </form>
    <p id="verifyStatus" class="text-red-600 mt-4 hidden">❌ 驗證失敗，請確認資料是否正確</p>
  </section>

  <!-- 📝 活動表單（預設隱藏） -->
  <section id="eventSection" class="max-w-xl mx-auto mt-10 p-6 bg-white rounded shadow hidden">
    <h2 class="text-xl font-semibold mb-4">📌 新增活動</h2>
    <form id="eventForm" class="space-y-4">
      <input type="text" id="title" placeholder="活動名稱" required class="w-full px-3 py-2 border rounded" />
      <input type="datetime-local" id="start" required class="w-full px-3 py-2 border rounded" />
      <input type="datetime-local" id="end" required class="w-full px-3 py-2 border rounded" />
      <input type="text" id="location" placeholder="地點" class="w-full px-3 py-2 border rounded" />
      <textarea id="description" placeholder="備註" class="w-full px-3 py-2 border rounded"></textarea>
      <button type="submit" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">儲存活動</button>
    </form>
    <p id="saveStatus" class="text-green-600 mt-4 hidden">✅ 活動已儲存（暫存在本機）</p>
  </section>

  <!-- 🔧 JavaScript -->
  <script>
    // 幹部名單（可自行擴充）
    const staffList = [
      { class: "305", number: "12", name: "王奕嘉" },
      { class: "304", number: "7", name: "林同學" },
      { class: "303", number: "5", name: "陳幹部" }
    ];

    // 幹部驗證
    document.getElementById("verifyForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const classInput = document.getElementById("class").value.trim();
      const numberInput = document.getElementById("number").value.trim();
      const nameInput = document.getElementById("name").value.trim();

      const matched = staffList.some(
        (staff) =>
          staff.class === classInput &&
          staff.number === numberInput &&
          staff.name === nameInput
      );

      if (matched) {
        document.getElementById("verifyForm").style.display = "none";
        document.getElementById("verifyStatus").classList.add("hidden");
        document.getElementById("eventSection").classList.remove("hidden");
      } else {
        document.getElementById("verifyStatus").classList.remove("hidden");
      }
    });

    // 活動儲存（LocalStorage）
    document.getElementById("eventForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const activity = {
        title: document.getElementById("title").value,
        start: document.getElementById("start").value,
        end: document.getElementById("end").value,
        location: document.getElementById("location").value,
        description: document.getElementById("description").value,
        savedAt: new Date().toISOString()
      };

      const existing = JSON.parse(localStorage.getItem("nhmc_events") || "[]");
      existing.push(activity);
      localStorage.setItem("nhmc_events", JSON.stringify(existing));

      document.getElementById("saveStatus").classList.remove("hidden");
      document.getElementById("eventForm").reset();
    });
  </script>

  <!-- 📌 頁尾 -->
  <footer class="text-center text-sm text-gray-500 mt-10 mb-4">
    © 2025 內湖高中軍武社 | 設計與維護：軍武社前端小組
  </footer>
</body>
</html>
